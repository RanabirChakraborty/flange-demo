[Unit]
Description=JBoss EAP (standalone mode)
After=syslog.target network.target
Before=httpd.service

[Service]
Environment=LAUNCH_JBOSS_IN_BACKGROUND=1
Environment="JAVA_HOME={{ java.home }}"
Environment="JAVAPTH={{ java.home }}/bin"
Environment="WILDFLY_SH={{ wildfly.home }}/bin/standalone.sh"
Environment="WILDFLY_SERVER_CONFIG={{ wildfly.config_name_prefix }}{{ item }}.xml"
Environment="WILDFLY_CONSOLE_LOG={{ wildfly.home }}/standalone/console.log"
Environment="WILDFLY_MODULEPATH={{ wildfly.home }}/modules"
Environment="WILDFLY_BIND={{ wildfly.bind_addr }}"
Environment="JBOSS_PIDFILE=/var/run/{{ wildfly.config_name_prefix }}{{ item }}.pid"
User=wildfly
Group=wildfly
PIDFile=/var/run/{{ wildfly.config_name_prefix }}{{ item }}.pid
ExecStart=/usr/bin/scl enable $EAP7_SCLS_ENABLED -- {{ wildfly.home }}/bin/launch.sh $JAVA_HOME $JAVAPTH $WILDFLY_MODULEPATH $WILDFLY_SH $WILDFLY_SERVER_CONFIG $WILDFLY_BIND $WILDFLY_CONSOLE_LOG H O$WILDFLY_OPTS

[Install]
WantedBy=multi-user.target

